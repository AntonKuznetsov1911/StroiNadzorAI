# СтройНадзорAI v5.0

## Профессиональный AI-ассистент для строительной отрасли РФ

[![Telegram Bot](https://img.shields.io/badge/Telegram-Bot-blue.svg)](https://t.me/StroiNadzorAI_bot)
[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## Возможности

### Мультимодельный AI
| Модель | Назначение |
|--------|------------|
| **xAI Grok 2/3** | Технические вопросы + веб-поиск |
| **Claude Sonnet 4.5** | Сложный анализ (fallback) |
| **Gemini 2.5 Flash** | Анализ фотографий дефектов |
| **Gemini Live API** | Real-time голосовой ассистент |
| **DALL-E 3** | Генерация чертежей по ГОСТ |
| **Whisper** | Распознавание голосовых сообщений |

### База знаний
- **27 нормативов** — СП, ГОСТ (редакции 2024-2025)
- **8 федеральных законов** — 190-ФЗ, 384-ФЗ, 123-ФЗ и др.
- **Справочник строителя** — 270KB практических знаний

### Инструменты
- **20+ калькуляторов** — бетон, арматура, материалы
- **Генерация чертежей** — схемы с размерами по ГОСТ 2.307
- **Анализ фотографий** — дефекты, материалы, конструкции
- **Шаблоны документов** — акты, претензии, КС-2/КС-3
- **Real-time голос** — hands-free на стройплощадке

---

## Быстрый старт

### 1. Клонирование
```bash
git clone https://github.com/AntonKuznetsov1911/StroiNadzorAI.git
cd StroiNadzorAI
```

### 2. Установка зависимостей
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
pip install -r requirements.txt
```

### 3. Настройка переменных окружения
```bash
cp .env.example .env
# Отредактируйте .env, добавив ваши API ключи
```

**Минимальные переменные:**
```env
TELEGRAM_BOT_TOKEN=your_bot_token
XAI_API_KEY=your_xai_key
```

**Полный набор (рекомендуется):**
```env
TELEGRAM_BOT_TOKEN=...
XAI_API_KEY=...
ANTHROPIC_API_KEY=...
OPENAI_API_KEY=...
GOOGLE_API_KEY=...
```

### 4. Запуск
```bash
python bot.py
```

---

## Команды бота

### Основные
| Команда | Описание |
|---------|----------|
| `/start` | Приветствие и быстрый старт |
| `/help` | Подробная справка |
| `/role` | Выбор роли (прораб/ГИП/ОТК/директор) |
| `/calculators` | Строительные калькуляторы |

### Нормативы
| Команда | Описание |
|---------|----------|
| `/regulations` | 27 актуальных СП и ГОСТ |
| `/requirements2025` | Требования 2025 года |
| `/laws` | Федеральные законы |
| `/hse` | Охрана труда |

### Генерация и анализ
| Команда | Описание |
|---------|----------|
| `/generate` | Генерация чертежей |
| `/templates` | Шаблоны документов |
| Отправить фото | Анализ дефектов |
| Голосовое сообщение | Распознавание речи |

---

## Архитектура

```
┌─────────────────────────────────────────────────────────────┐
│                    TELEGRAM ПОЛЬЗОВАТЕЛЬ                    │
└─────────────────────────┬───────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                      bot.py (основной)                      │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │ Текстовые   │  │ Голосовые   │  │ Фото                │  │
│  │ сообщения   │  │ сообщения   │  │ (дефекты)           │  │
│  └──────┬──────┘  └──────┬──────┘  └──────────┬──────────┘  │
└─────────┼────────────────┼───────────────────┬┼─────────────┘
          ▼                ▼                   ▼
┌─────────────────┐ ┌─────────────┐  ┌─────────────────────────┐
│  model_selector │ │   Whisper   │  │    Gemini Vision        │
│  (маршрутизация)│ │   (OpenAI)  │  │    (анализ фото)        │
└────────┬────────┘ └─────────────┘  └─────────────────────────┘
         ▼
┌────────────────────────────────────────────────────────────┐
│           Grok 2/3  │  Claude  │  DALL-E 3                 │
│           (основной)│ (fallback)│ (чертежи)                │
└────────────────────────────────────────────────────────────┘
```

---

## Голосовой ассистент (Real-time)

### Компоненты
- **Mini App** (`mini_app/`) — веб-интерфейс в Telegram
- **WebSocket Proxy** (`websocket_proxy.py`) — связь с Gemini Live API
- **Gemini Live API** — real-time голосовое общение

### Запуск голосового режима
```bash
# Запустите WebSocket прокси
python websocket_proxy.py

# Или через Procfile.websocket
web: python websocket_proxy.py
```

См. [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) для полной инструкции.

---

## Развёртывание

### Railway.app (рекомендуется)
```bash
railway login
railway init
railway up
```

### Heroku
```bash
heroku create stroinadzor-bot
git push heroku main
```

Подробнее: [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md)

---

## Документация

| Файл | Описание |
|------|----------|
| [QUICK_START.md](QUICK_START.md) | Быстрый старт |
| [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) | Развёртывание |
| [PROJECT_DESCRIPTION.md](PROJECT_DESCRIPTION.md) | Полное описание |
| [docs/](docs/) | Архив документации |

---

## Статистика

| Метрика | Значение |
|---------|----------|
| Строк кода | ~28,000 |
| Файлов Python | 45+ |
| Команд | 30+ |
| Калькуляторов | 20+ |
| Нормативов | 27 СП/ГОСТ + 8 ФЗ |
| AI моделей | 6 |

---

## Лицензия

MIT License — см. [LICENSE](LICENSE)

---

## Автор

**Anton Kuznetsov** — [@AntonKuznetsov1911](https://github.com/AntonKuznetsov1911)

---

*Версия 5.0 | Декабрь 2025*
