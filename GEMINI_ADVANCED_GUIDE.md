# üöÄ Gemini Advanced –¥–ª—è StroiNadzorAI

## –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Gemini API

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-20
–í–µ—Ä—Å–∏—è: 2.0 - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Gemini

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π](#–æ–±–∑–æ—Ä-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑](#–º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π-–∞–Ω–∞–ª–∏–∑)
4. [–†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º](#—Ä–∞–±–æ—Ç–∞-—Å-–±–æ–ª—å—à–∏–º-–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
5. [Function Calling](#function-calling)
6. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–æ—Ç—á—ë—Ç–æ–≤)
7. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üéØ –û–ë–ó–û–† –í–û–ó–ú–û–ñ–ù–û–°–¢–ï–ô

### –ß—Ç–æ —É–º–µ–µ—Ç Gemini Advanced Handler:

#### 1. –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —á–µ—Ä—Ç–µ–∂–µ–π –∏ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —Å –æ–±—ä–µ–∫—Ç–∞ (–∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å)
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –¥–∏–∫—Ç–æ–≤–∫–∏ –∞–∫—Ç–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### 2. –û–≥—Ä–æ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (1M-2M —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –°–ü/–ì–û–°–¢ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ –û—Ç–≤–µ—Ç—ã —Å —Ç–æ—á–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –ø—É–Ω–∫—Ç—ã –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ü–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 3. Function Calling
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ CRM/Jira/Bitrix24
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω–∞–º

#### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (JSON Mode)
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º –∏ –∞–∫—Ç–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### 5. –†–µ–∂–∏–º —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π (Thinking Mode)
- ‚úÖ –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –°–ù–∏–ü–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install google-generativeai python-telegram-bot

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á
export GOOGLE_API_KEY="your_gemini_api_key"
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±–æ—Ç–µ

```python
from gemini_bot_integration import init_gemini_handler, register_gemini_handlers

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
init_gemini_handler()

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –≤ –±–æ—Ç–µ
register_gemini_handlers(application)
```

---

## üìê –ú–£–õ–¨–¢–ò–ú–û–î–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

### 1. –ê–Ω–∞–ª–∏–∑ —á–µ—Ä—Ç–µ–∂–µ–π

**–ö–æ–º–∞–Ω–¥–∞:** `/analyze_drawing`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ì–û–°–¢/–°–ü
- –ù–∞—Ö–æ–¥–∏—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ —á–µ—Ä—Ç–µ–∂–∞]
/analyze_drawing –ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –°–ü 63.13330.2018

–ë–æ—Ç:
üìã –ê–ù–ê–õ–ò–ó –ß–ï–†–¢–ï–ñ–ê

üìê –û–ø–∏—Å–∞–Ω–∏–µ:
–õ–µ–Ω—Ç–æ—á–Ω—ã–π –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Å –∞—Ä–º–∞—Ç—É—Ä–Ω—ã–º –∫–∞—Ä–∫–∞—Å–æ–º

üîß –≠–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
‚Ä¢ –¢–µ–ª–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ –∏–∑ –±–µ—Ç–æ–Ω–∞ –ú300
‚Ä¢ –ü—Ä–æ–¥–æ–ª—å–Ω–∞—è –∞—Ä–º–∞—Ç—É—Ä–∞ 4√ò16–º–º A500C
‚Ä¢ –ü–æ–ø–µ—Ä–µ—á–Ω—ã–µ —Ö–æ–º—É—Ç—ã √ò8–º–º —Å —à–∞–≥–æ–º 200–º–º
‚Ä¢ –ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è —Ä—É–±–µ—Ä–æ–∏–¥ –†–ö–ü-350

üìè –†–∞–∑–º–µ—Ä—ã:
‚Ä¢ –®–∏—Ä–∏–Ω–∞ –ø–æ–¥–æ—à–≤—ã: 800–º–º
‚Ä¢ –ì–ª—É–±–∏–Ω–∞ –∑–∞–ª–æ–∂–µ–Ω–∏—è: 1200–º–º
‚Ä¢ –ó–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π: 40–º–º

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:
–°—Ç–∞—Ç—É—Å: COMPLIANT

üìö –ü—Ä–∏–º–µ–Ω–∏–º—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã:
‚Ä¢ –°–ü 63.13330.2018 (–ë–µ—Ç–æ–Ω–Ω—ã–µ –∏ –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
‚Ä¢ –ì–û–°–¢ 34028-2016 (–ê—Ä–º–∞—Ç—É—Ä–∞)
‚Ä¢ –°–ü 22.13330.2016 (–û—Å–Ω–æ–≤–∞–Ω–∏—è –∑–¥–∞–Ω–∏–π)

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
‚Ä¢ –£—Ç–æ—á–Ω–∏—Ç—å –º–∞—Ä–∫—É –±–µ—Ç–æ–Ω–∞ –ø–æ –º–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–º–µ—Ç–∫—É –≥–ª—É–±–∏–Ω—ã –ø—Ä–æ–º–µ—Ä–∑–∞–Ω–∏—è –≥—Ä—É–Ω—Ç–∞

‚ú® Gemini 2.0 Flash —Å –∞–Ω–∞–ª–∏–∑–æ–º –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤
```

---

### 2. –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ —Å –æ–±—ä–µ–∫—Ç–∞

**–ö–æ–º–∞–Ω–¥—ã:**
- `/video_safety` - –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `/video_progress` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç
- `/video_quality` - –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

**–ü—Ä–∏–º–µ—Ä: –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ —Å –æ–±—ä–µ–∫—Ç–∞]
/video_safety

–ë–æ—Ç:
üé• –ê–ù–ê–õ–ò–ó –í–ò–î–ï–û: –ê–£–î–ò–¢ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è:

‚Ä¢ 00:15 - –†–∞–±–æ—á–∏–π –±–µ–∑ –∫–∞—Å–∫–∏ –Ω–∞ –≤—ã—Å–æ—Ç–µ
‚Ä¢ 00:42 - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∫–æ—Ç–ª–æ–≤–∞–Ω–∞
‚Ä¢ 01:20 - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ—Å—Ç–Ω–∏—Ü—ã
‚Ä¢ 02:10 - –†–∞–±–æ—á–∏–π –±–µ–∑ —Å—Ç—Ä–∞—Ö–æ–≤–æ—á–Ω–æ–≥–æ –ø–æ—è—Å–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞ –≤—ã—Å–æ—Ç–µ

ü¶∫ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: CRITICAL
‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π

‚ú® Gemini 2.0 Flash —Å –∞–Ω–∞–ª–∏–∑–æ–º –≤–∏–¥–µ–æ
```

---

### 3. –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç —Ä–µ—á—å –≤ —Ç–µ–∫—Å—Ç
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ–∑–¥–∞—ë—Ç –æ—Ç—á—ë—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∫—Ç–æ–≤–∫–∏

**–ü—Ä–∏–º–µ—Ä:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ]
"–ù–∞ –æ–±—ä–µ–∫—Ç–µ –õ–µ–Ω–∏–Ω–∞ 15 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ä–∞–±–æ—Ç—ã:
–∑–∞–ª–∏—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç 30 –∫—É–±–æ–≤ –±–µ—Ç–æ–Ω–∞ –ú300,
—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 12 —Ç–æ–Ω–Ω –∞—Ä–º–∞—Ç—É—Ä—ã,
–µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Å—Ç–∞–≤–∫–æ–π –∫–∏—Ä–ø–∏—á–∞,
–Ω—É–∂–Ω–æ 50 —Ç—ã—Å—è—á —à—Ç—É–∫ –∫ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫—É"

–ë–æ—Ç:
üé§ –ì–û–õ–û–°–û–í–ê–Ø –ö–û–ú–ê–ù–î–ê –û–ë–†–ê–ë–û–¢–ê–ù–ê

üìù –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:
"–ù–∞ –æ–±—ä–µ–∫—Ç–µ –õ–µ–Ω–∏–Ω–∞ 15 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ä–∞–±–æ—Ç—ã: –∑–∞–ª–∏—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç..."

üìä –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "object": "–õ–µ–Ω–∏–Ω–∞ 15",
  "completed_works": [
    {
      "work": "–ó–∞–ª–∏–≤–∫–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞",
      "material": "–ë–µ—Ç–æ–Ω –ú300",
      "volume": "30 –º¬≥"
    },
    {
      "work": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã",
      "volume": "12 —Ç–æ–Ω–Ω"
    }
  ],
  "issues": [
    {
      "issue": "–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Å—Ç–∞–≤–∫–æ–π –∫–∏—Ä–ø–∏—á–∞",
      "required": "50,000 —à—Ç—É–∫",
      "deadline": "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫"
    }
  ]
}
```

‚ú® Gemini 2.0 Flash —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∞—É–¥–∏–æ
```

---

## üìö –†–ê–ë–û–¢–ê –° –ë–û–õ–¨–®–ò–ú –ö–û–ù–¢–ï–ö–°–¢–û–ú

### –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤ (1M+ —Ç–æ–∫–µ–Ω–æ–≤)

```python
from gemini_advanced_handler import GeminiAdvancedHandler

handler = GeminiAdvancedHandler()

# –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –°–ü –∏ –ì–û–°–¢ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
regulations = [
    "normatives/SP_63.13330.2018.pdf",
    "normatives/GOST_34028-2016.pdf",
    "normatives/SP_22.13330.2016.pdf",
    # ... –¥–æ 1 –º–∏–ª–ª–∏–æ–Ω–∞ —Ç–æ–∫–µ–Ω–æ–≤
]

context_id = await handler.load_regulations_context(regulations)
```

### –ó–∞–ø—Ä–æ—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤

```python
result = await handler.query_with_regulations(
    question="–ö–∞–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –±–µ—Ç–æ–Ω–∞ –¥–ª—è –∞—Ä–º–∞—Ç—É—Ä—ã √ò16–º–º –≤ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–µ?",
    use_thinking=True  # –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
)

print(result)
# {
#   "answer": "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –±–µ—Ç–æ–Ω–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 40–º–º",
#   "references": [
#     {
#       "document": "–°–ü 63.13330.2018",
#       "section": "10.3.2",
#       "quote": "–¢–æ–ª—â–∏–Ω–∞ –∑–∞—â–∏—Ç–Ω–æ–≥–æ —Å–ª–æ—è –±–µ—Ç–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ..."
#     }
#   ],
#   "reasoning": "–ê–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –°–ü 63.13330.2018 –ø.10.3.2...",
#   "examples": ["–î–ª—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–≤ –≤ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ..."]
# }
```

---

## üîß FUNCTION CALLING

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

Gemini –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è:
- –†–∞—Å—á—ë—Ç–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ CRM
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞ —Å function calling:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
"–ú–Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ª–∏—Ç—å –ø–ª–∏—Ç—É 6x8 –º–µ—Ç—Ä–æ–≤ —Ç–æ–ª—â–∏–Ω–æ–π 200–º–º.
–ü—Ä–æ–≤–µ—Ä—å, —Ö–≤–∞—Ç–∏—Ç –ª–∏ –±–µ—Ç–æ–Ω–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ."

Gemini:
1. –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é calculate_materials():
   - material_type: "–±–µ—Ç–æ–Ω"
   - dimensions: {"length": 6, "width": 8, "thickness": 0.2}
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: 9.6 –º¬≥

2. –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é check_stock():
   - material: "–±–µ—Ç–æ–Ω –ú300"
   - quantity: 9.6
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: {"available": 12, "status": "sufficient"}

–ë–æ—Ç:
üìä –†–∞—Å—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
‚Ä¢ –¢—Ä–µ–±—É–µ—Ç—Å—è: 9.6 –º¬≥ –±–µ—Ç–æ–Ω–∞ –ú300
‚Ä¢ –ù–∞ —Å–∫–ª–∞–¥–µ: 12 –º¬≥
‚Ä¢ –°—Ç–∞—Ç—É—Å: ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
‚Ä¢ –û—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç: 2.4 –º¬≥

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ú–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–∞–±–æ—Ç–∞–º
```

---

## üìä –ì–ï–ù–ï–†–ê–¶–ò–Ø –û–¢–ß–Å–¢–û–í

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ

**–ö–æ–º–∞–Ω–¥–∞:** `/daily_report`

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –°–¥–µ–ª–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ —Å –æ–±—ä–µ–∫—Ç–∞
2. –ó–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ + –∫–æ–º–∞–Ω–¥—É `/generate_report`

**–ß—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ:**

```
üìä –ï–ñ–ï–î–ù–ï–í–ù–´–ô –û–¢–ß–Å–¢ –û –ü–†–û–ì–†–ï–°–°–ï

üìÖ –î–∞—Ç–∞: 2025-12-20

üìù –°–≤–æ–¥–∫–∞:
–ü—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è —Ä–∞–±–æ—Ç—ã –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞. –ó–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
–∞—Ä–º–∞—Ç—É—Ä–Ω–æ–≥–æ –∫–∞—Ä–∫–∞—Å–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ª–∏–≤–∫–µ –±–µ—Ç–æ–Ω–∞.

‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:
‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã - 12 —Ç–æ–Ω–Ω
‚Ä¢ –ú–æ–Ω—Ç–∞–∂ –æ–ø–∞–ª—É–±–∫–∏ - 80 –º¬≤
‚Ä¢ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–±–µ—Ç–æ–Ω–∫–∏ - 15 –º¬≤

üîÑ –¢–µ–∫—É—â–∏–µ —Ä–∞–±–æ—Ç—ã:
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ª–∏–≤–∫–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞
‚Ä¢ –î–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Ç–æ–Ω–∞ –ú300

‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã:
üü° –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–∞–≤–∫–∏ –≥–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏–∏ –Ω–∞ 2 –¥–Ω—è
   üí° –ó–∞–∫–∞–∑–∞–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞

‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: ‚úÖ –ù–∞—Ä—É—à–µ–Ω–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

üìã –ü–ª–∞–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞:
‚Ä¢ –ó–∞–ª–∏–≤–∫–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ (30 –º¬≥)
‚Ä¢ –£—Ö–æ–¥ –∑–∞ –±–µ—Ç–æ–Ω–æ–º
‚Ä¢ –ù–∞—á–∞–ª–æ –¥–µ–º–æ–Ω—Ç–∞–∂–∞ –æ–ø–∞–ª—É–±–∫–∏ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π

‚ú® Gemini 2.0 Flash - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç

[–ü—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω JSON —Ñ–∞–π–ª –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞]
```

---

## üí° –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ü–∏–π –ì–û–°–¢

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–ó–∞–≥—Ä—É–∑–∏ —Å—Ç–∞—Ä—É—é –∏ –Ω–æ–≤—É—é —Ä–µ–¥–∞–∫—Ü–∏—é –ì–û–°–¢ 34028
–∏ —Å–æ—Å—Ç–∞–≤—å —Ç–∞–±–ª–∏—Ü—É –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ë–æ—Ç:
üìã –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–î–ê–ö–¶–ò–ô –ì–û–°–¢ 34028

–ì–û–°–¢ 34028-2016 vs –ì–û–°–¢ 34028-2024

–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. –ö–ª–∞—Å—Å—ã –∞—Ä–º–∞—Ç—É—Ä—ã:
   –ë–´–õ–û: A240, A400, A500
   –°–¢–ê–õ–û: A240, A400, A500, A600

2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–≤–∞—Ä–∏–≤–∞–µ–º–æ—Å—Ç–∏:
   –û–ë–ù–û–í–õ–ï–ù–û: –ø.5.2.1 - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è A600

3. –ú–µ—Ç–æ–¥—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π:
   –ù–û–í–û–ï: –ø.7.3 - —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å

[–ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ JSON]
```

### –ü—Ä–∏–º–µ—Ä 2: –í–∏–¥–µ–æ-–∞—É–¥–∏—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–í–∏–¥–µ–æ 5 –º–∏–Ω—É—Ç —Å –æ–±—Ö–æ–¥–∞ –æ–±—ä–µ–∫—Ç–∞]
/video_safety

–ë–æ—Ç:
üé• –í–ò–î–ï–û-–ê–£–î–ò–¢ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ 7 –Ω–∞—Ä—É—à–µ–Ω–∏–π:

00:23 - –†–∞–±–æ—á–∏–π –±–µ–∑ –∫–∞—Å–∫–∏ (–∑–æ–Ω–∞ –ê, 2 —ç—Ç–∞–∂)
01:15 - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–∞ –ª–µ—Å—Ç–Ω–∏—Ü–µ
02:40 - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–π–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
03:05 - –†–∞–±–æ—á–∏–π –±–µ–∑ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –Ω–∞ –≤—ã—Å–æ—Ç–µ 6–º
03:50 - –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∫–∞–±–µ–ª—å
04:20 - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥–Ω–µ—Ç—É—à–∏—Ç–µ–ª—è –Ω–∞ —ç—Ç–∞–∂–µ
04:55 - –ù–µ–∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –ª–µ—Å–∞

üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 2
üü° –°—Ä–µ–¥–Ω–∏–µ: 3
üü¢ –ù–∏–∑–∫–∏–µ: 2

üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—ã –Ω–∞ –≤—ã—Å–æ—Ç–µ –¥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–æ–π
2. –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –∫–∞–±–µ–ª—å
3. –ü—Ä–æ–≤–µ—Å—Ç–∏ –≤–Ω–µ–ø–ª–∞–Ω–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ –¢–ë
```

---

## üéì –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### JSON Mode –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º

```python
result = await handler.analyze_drawing(
    image_data=drawing_photo,
    question="–ò–∑–≤–ª–µ–∫–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–∫—Ç–∞ —Å–∫—Ä—ã—Ç—ã—Ö —Ä–∞–±–æ—Ç"
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ JSON - –≥–æ—Ç–æ–≤ –∫ –≤—Å—Ç–∞–≤–∫–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
{
  "object_name": "–ñ–∏–ª–æ–π –¥–æ–º –ø–æ —É–ª. –õ–µ–Ω–∏–Ω–∞ 15",
  "work_type": "–ê—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞",
  "materials": [
    {"name": "–ê—Ä–º–∞—Ç—É—Ä–∞ A500C √ò16", "quantity": "2400", "unit": "–º"},
    {"name": "–ü—Ä–æ–≤–æ–ª–æ–∫–∞ –≤—è–∑–∞–ª—å–Ω–∞—è", "quantity": "15", "unit": "–∫–≥"}
  ],
  "compliance": "–°–ü 63.13330.2018",
  "inspector": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
  "date": "2025-12-20"
}
```

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `railway logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ GOOGLE_API_KEY –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã Gemini API

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Gemini API:**
- https://ai.google.dev/gemini-api/docs
- https://ai.google.dev/gemini-api/docs/image-generation
- https://ai.google.dev/gemini-api/docs/function-calling

---

**–°–æ–∑–¥–∞–Ω–æ:** Claude Sonnet 4.5
**–î–∞—Ç–∞:** 2025-12-20
**–ü—Ä–æ–µ–∫—Ç:** StroiNadzorAI v2.0 - Gemini Advanced Integration

**–°—Ç–∞—Ç—É—Å:** üöÄ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**
